(self.webpackChunkbuildmarket_angular=self.webpackChunkbuildmarket_angular||[]).push([[317],{2906:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var i=r(5366),n=r(7237),a=r(1334);let o=(()=>{class e{constructor(e,t){this._auth2Service=e,this._router=t}canActivate(e,t){return this._auth2Service.isLoggedIn||this._router.navigate(["/admin","login"]),!0}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(n.X),i.LFG(a.F0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AdminModule:()=>I});var i=r(1116),n=r(1334),a=r(5366),o=r(6455),s=r(7237),u=r(730);const c=["openBtn"],d=["closeBtn"];function l(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"nav",11),a.TgZ(1,"a",12),a._uU(2,"\u041f\u0430\u043d\u0435\u043b\u044c \u0442\u043e\u0432\u0430\u0440\u0456\u0432"),a.qZA(),a.TgZ(3,"a",13),a._uU(4,"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440"),a.qZA(),a.TgZ(5,"a",14),a._uU(6,"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"),a.qZA(),a.TgZ(7,"a",15),a._uU(8,"\u0422\u0438\u043f\u0438 \u0442\u043e\u0432\u0430\u0440\u0456\u0432"),a.qZA(),a.TgZ(9,"a",16),a.NdJ("click",function(t){return a.CHM(e),a.oxw().logout(t)}),a._uU(10,"\u0412\u0438\u0439\u0442\u0438"),a.qZA(),a.qZA()}}function h(e,t){1&e&&(a.TgZ(0,"nav",11),a.TgZ(1,"a",17),a._uU(2,"\u041b\u043e\u0433\u0456\u043d"),a.qZA(),a.qZA())}let m=(()=>{class e{constructor(e,t){this.auth2Service=e,this._router=t,this.isOpenedMenu=!1,this.menuData=[{routerLink:"/admin/dashboard",class:"menu__item",routerLinkActive:"active",text:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"},{routerLink:"/admin/add-product",class:"menu__item",routerLinkActive:"active",text:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440"},{routerLink:"/admin/orders",class:"menu__item",routerLinkActive:"active",text:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"},{routerLink:"/admin/login",class:"menu__item",routerLinkActive:"active",text:"\u041b\u043e\u0433\u0456\u043d"},{routerLink:"/admin",class:"menu__item",routerLinkActive:"active",text:"\u0412\u0438\u0439\u0442\u0438"}]}logout(e){e.preventDefault(),this.auth2Service.signOut(),this._router.navigate(["/admin","login"])}ngOnInit(){this._router.events.subscribe(e=>{e instanceof n.OD&&this.onCloseMenu()})}onShowMenu(){this.isOpenedMenu=!0}onCloseMenu(){this.isOpenedMenu=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.X),a.Y36(n.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-admin-header"]],viewQuery:function(e,t){if(1&e&&(a.Gf(c,5),a.Gf(d,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.openBtn=e.first),a.iGM(e=a.CRH())&&(t.closeBtn=e.first)}},decls:14,vars:4,consts:[[1,"site__header"],[1,"site__header-main"],[1,"site__centered"],[1,"site__header-menu"],[1,"site__header-open",3,"click"],["openBtn",""],[1,"site__header-wrap"],["class","menu",4,"ngIf","ngIfElse"],["login",""],[1,"site__header-close",3,"click"],["closeBtn",""],[1,"menu"],["routerLink","/admin/dashboard","routerLinkActive","active",1,"menu__item"],["routerLink","/admin/add-product","routerLinkActive","active",1,"menu__item"],["routerLink","/admin/orders","routerLinkActive","active",1,"menu__item"],["routerLink","/admin/types","routerLinkActive","active",1,"menu__item"],["href","#","routerLinkActive","active",1,"menu__item",3,"click"],["routerLink","/admin/login","routerLinkActive","active",1,"menu__item"]],template:function(e,t){if(1&e&&(a.TgZ(0,"header",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._UZ(3,"app-logo"),a.TgZ(4,"div",3),a.TgZ(5,"button",4,5),a.NdJ("click",function(){return t.onShowMenu()}),a._UZ(7,"span"),a.qZA(),a.TgZ(8,"div",6),a.YNc(9,l,11,0,"nav",7),a.YNc(10,h,3,0,"ng-template",null,8,a.W1O),a.TgZ(12,"button",9,10),a.NdJ("click",function(){return t.onCloseMenu()}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.MAs(11);a.xp6(8),a.ekj("opened",t.isOpenedMenu),a.xp6(1),a.Q6J("ngIf",t.auth2Service.isLoggedIn)("ngIfElse",e)}},directives:[u.R,i.O5,n.yS,n.Od],styles:[""]}),e})();var p=r(6658),g=r(7672);function _(e,t){1&e&&(a.TgZ(0,"div",3),a._UZ(1,"mat-spinner",4),a.qZA())}let v=(()=>{class e{constructor(e){this._storeService=e,this.showPreloader=!1}ngOnDestroy(){this._showPreloaderSubscription.unsubscribe()}ngOnInit(){this._showPreloaderSubscription=this._storeService.showPreloader.subscribe(e=>{this.showPreloader=e}),this._storeService.isAdmin.next(!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.d))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-admin"]],decls:6,vars:1,consts:[[1,"site"],["class","site__preloader",4,"ngIf"],[1,"site__content"],[1,"site__preloader"],[1,"site__preloader-spinner"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.YNc(1,_,2,0,"div",1),a._UZ(2,"app-admin-header"),a.TgZ(3,"main",2),a._UZ(4,"router-outlet"),a.qZA(),a._UZ(5,"app-site-footer"),a.qZA()),2&e&&(a.xp6(1),a.Q6J("ngIf",t.showPreloader))},directives:[i.O5,m,n.lC,p.f,g.$g],styles:[""]}),e})();var f=r(2906);const A=[{path:"",component:v,children:[{path:"",redirectTo:"/admin/login",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(592),r.e(577)]).then(r.bind(r,577)).then(e=>e.LoginPageModule)},{path:"add-product",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(112),r.e(841),r.e(752),r.e(890),r.e(237),r.e(265)]).then(r.bind(r,4265)).then(e=>e.AddProductModule),canActivate:[f.a]},{path:"all-orders",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(592),r.e(941)]).then(r.bind(r,6941)).then(e=>e.AllOrdersModule),canActivate:[f.a]},{path:"dashboard",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(592),r.e(777)]).then(r.bind(r,9777)).then(e=>e.DashboardModule),canActivate:[f.a]},{path:"product/:typeID/:productID/edit",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(112),r.e(841),r.e(752),r.e(890),r.e(237),r.e(36)]).then(r.bind(r,7036)).then(e=>e.EditPageModule),canActivate:[f.a]},{path:"orders",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(592),r.e(709)]).then(r.bind(r,5709)).then(e=>e.OrdersPageModule),canActivate:[f.a]},{path:"order/:orderID",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(112),r.e(841),r.e(289),r.e(93),r.e(913),r.e(592),r.e(324)]).then(r.bind(r,5324)).then(e=>e.OrderPageModule),canActivate:[f.a]},{path:"types",loadChildren:()=>Promise.all([r.e(462),r.e(550),r.e(592),r.e(936)]).then(r.bind(r,9936)).then(e=>e.ProductsTypesModule),canActivate:[f.a]}]}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.Bz.forChild(A)],n.Bz]}),e})();var k=r(713),L=r(1493);let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,n.Bz,k.h,L.u]]}),e})();var S=r(8870);let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,Z,b,g.Cq,S.n]]}),e})()},7237:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var i=r(5366),n=r(1428),a=r(9252),o=r(1334);let s=(()=>{class e{constructor(e,t,r){this._angularFireAuth=e,this._angularFirestore=t,this._router=r,this._angularFireAuth.authState.subscribe(e=>{e?(this.userData=e,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}setUserData(e){return this._angularFirestore.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}signIn(e,t){return this._angularFireAuth.signInWithEmailAndPassword(e,t).then(e=>{this.setUserData(e.user).then(e=>{}).catch(e=>{}),this._angularFireAuth.authState.subscribe(e=>{e&&this._router.navigate(["/admin","dashboard"])})}).catch(e=>{window.alert(e.message)})}signOut(){return this._angularFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this._router.navigate(["/admin","login"])})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(n.zQ),i.LFG(a.ST),i.LFG(o.F0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);